<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Cassaforte</title>
  <meta name="color-scheme" content="dark light">
  <style>
    :root{
      --bg:#0e0e12; --ink:#f6f7fb; --muted:#9aa0aa; --ok:#2ecc71; --ko:#ff5c5c;
      --steel1:#d8dde3; --steel2:#9aa4af; --steel3:#5b6572;
      --safe-size: min(88vw, 340px); --radius:22px;
    }

    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
      background:
        radial-gradient(1200px 700px at 10% -10%, #1e1b27, transparent 55%),
        radial-gradient(900px 600px at 110% 110%, #0b0b0f, transparent 50%),
        var(--bg);
      color:var(--ink);
    }
    .app{
      min-height:100svh;
      padding:calc(env(safe-area-inset-top)+16px) 16px calc(env(safe-area-inset-bottom)+18px);
      display:grid; place-items:center; grid-template-rows:auto 1fr auto; gap:14px;
    }
    h1{margin:0; font-size:clamp(18px,4.6vw,22px); font-weight:800; text-align:center; text-transform:uppercase}
    .subtitle{margin:4px 0 0; color:var(--muted); text-align:center}

    /* ====== Cassaforte ====== */
    .stage{display:grid; place-items:center; width:100%}
    .safe{width:var(--safe-size); height:calc(var(--safe-size)*1.02); position:relative; perspective:1200px; filter:drop-shadow(0 30px 60px rgba(0,0,0,.45))}
    .box{
      position:absolute; inset:0; border-radius:var(--radius);
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.35)),
                 radial-gradient(140% 90% at 30% 10%, #222733 0 30%, #12151c 55%, #0d0f14 100%);
      border:1px solid #2a2f3a;
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.04), inset 0 18px 40px rgba(255,255,255,.05), inset 0 -30px 60px rgba(0,0,0,.45);
    }
    .box::after{content:""; position:absolute; inset:16px; border-radius:calc(var(--radius)-10px);
      background:radial-gradient(120% 90% at 50% 10%, rgba(0,0,0,.35), rgba(0,0,0,.65)); opacity:.35; transition:opacity .8s}
    .safe.open .box::after{opacity:.15}

    .door{
      position:absolute; inset:10px; border-radius:calc(var(--radius)-6px);
      background:radial-gradient(140% 100% at 20% 10%, #2b3240 0 25%, #1a1f29 60%, #11151c 100%);
      border:1px solid #3a4250; transform-origin:left center;
      box-shadow:inset 0 0 0 2px rgba(255,255,255,.03), inset 0 0 0 8px rgba(0,0,0,.45), 0 30px 40px rgba(0,0,0,.35);
      will-change:transform;
    }
    .bezel{position:absolute; inset:26px; border-radius:calc(var(--radius)-16px);
      background:radial-gradient(circle at 30% 30%, var(--steel1), transparent 50%),
                 radial-gradient(circle at 70% 70%, rgba(255,255,255,.35), transparent 55%),
                 linear-gradient(145deg, var(--steel2), var(--steel3));
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.35), inset 0 0 0 10px #212632, inset 0 0 0 12px rgba(255,255,255,.07);
    }
    .bolts{position:absolute; inset:22px; border-radius:inherit}
    .bolts::before, .bolts::after{content:""; position:absolute; inset:0; --b:radial-gradient(circle at 50% 50%, #cfd6df 0 40%, #7c8794 41% 100%)}
    .bolts::before{background:var(--b) 10% 12%/12px 12px no-repeat, var(--b) 90% 12%/12px 12px no-repeat, var(--b) 10% 50%/12px 12px no-repeat, var(--b) 90% 50%/12px 12px no-repeat}
    .bolts::after{background:var(--b) 10% 88%/12px 12px no-repeat, var(--b) 90% 88%/12px 12px no-repeat, var(--b) 50% 12%/12px 12px no-repeat, var(--b) 50% 88%/12px 12px no-repeat}
    .handle{position:absolute; left:34%; top:52%; width:92px; height:92px; transform:translate(-50%,-50%); border-radius:50%;
      background:radial-gradient(circle at 35% 30%, #fff 0 6%, #dadfe6 7% 20%, #7c8794 60%, #49525f 100%);
      box-shadow:inset 0 0 0 8px #2c3441, inset 0 0 0 10px rgba(255,255,255,.08), 0 8px 18px rgba(0,0,0,.45)}
    .handle::before,.handle::after{content:""; position:absolute; left:50%; top:50%; width:6px; height:42px; background:#cfd6df; transform-origin:50% 90%; border-radius:3px; box-shadow:0 1px 0 rgba(0,0,0,.35), inset 0 0 0 1px #7f8a97}
    .handle::before{transform:translate(-50%,-50%) rotate(60deg)} .handle::after{transform:translate(-50%,-50%) rotate(-60deg)}
    .spoke{position:absolute; left:50%; top:50%; width:6px; height:46px; background:#cfd6df; transform:translate(-50%,-50%) rotate(180deg); border-radius:3px; box-shadow:0 1px 0 rgba(0,0,0,.35), inset 0 0 0 1px #7f8a97}
    .knob-center{position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:26px; height:26px; border-radius:50%; background:radial-gradient(circle at 35% 35%, #fff, #cfd6df 60%, #7c8794 100%); box-shadow:inset 0 0 0 3px #2c3441, 0 2px 6px rgba(0,0,0,.35)}
    .dial{position:absolute; left:69%; top:44%; width:94px; height:94px; transform:translate(-50%,-50%); border-radius:50%;
      background:radial-gradient(circle at 50% 50%, #f2f5f8 0 38%, #c1c9d3 39% 60%, #5b6572 61% 100%);
      box-shadow:inset 0 0 0 10px #2b3441, inset 0 0 0 12px rgba(255,255,255,.08), 0 8px 18px rgba(0,0,0,.45)}
    .dial::after{content:""; position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:8px; height:36px; background:#d5dde6; border-radius:4px; box-shadow:inset 0 0 0 1px #8a95a3}

    /* Apertura completa: ruota e scivola fuori */
    .safe.open .door{animation:door-open 1.2s cubic-bezier(.2,.8,.1,1) forwards}
    @keyframes door-open{
      0%{transform:rotateY(0) translateX(0) translateZ(0)}
      65%{transform:rotateY(-115deg) translateX(10%) translateZ(50px)}
      100%{transform:rotateY(-115deg) translateX(-140%) translateZ(50px)}
    }

    /* ====== Pannello password ====== */
    .panel{width:min(92vw,360px); display:flex; gap:8px; align-items:center; justify-content:center; margin-top:4px}
    .pw{flex:1; padding:14px; font-size:18px; font-weight:700; border-radius:14px; border:1px solid #303546; color:#000; background:#fff; text-transform:uppercase; outline:none; box-shadow:0 10px 28px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.6)}
    .pw::placeholder{color:#8891a2; font-weight:600}
    .btn{padding:14px 16px; border-radius:14px; border:1px solid #2a3340; background:linear-gradient(180deg,#2f7fff,#1f5fe0); color:#fff; font-weight:800; letter-spacing:.4px; cursor:pointer; box-shadow:0 10px 28px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.3)}
    .btn:active{transform:translateY(1px)}
    .hint{text-align:center; color:var(--muted); font-size:.9rem; margin:6px 0 0}
    .hide{opacity:0; transform:translateY(8px); pointer-events:none; transition:.35s}

    @keyframes shake{10%,90%{transform:translateX(-1px)}20%,80%{transform:translateX(2px)}30%,50%,70%{transform:translateX(-4px)}40%,60%{transform:translateX(4px)}}
    .error{animation:shake .5s both; border-color:var(--ko)!important}

    /* ====== OVERLAY (sovraimpressione) ====== */
    .overlay{
      position:fixed; inset:0; display:grid; place-items:center; z-index:20;
      background:rgba(0,0,0,.55); backdrop-filter:blur(8px);
      opacity:0; pointer-events:none; transition:opacity .4s ease;
      padding:calc(env(safe-area-inset-top)+24px) 20px calc(env(safe-area-inset-bottom)+24px);
    }
    .overlay.show{opacity:1; pointer-events:auto}
    .overlay .note{
      max-width:520px; width:100%;
      background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(0,0,0,.35));
      border:1px solid #2c2f3a; border-radius:20px;
      padding:26px 22px; text-align:center;
      box-shadow:0 30px 60px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.04);
      transform:scale(.96); opacity:0; animation:note-in .35s .2s both;
    }
    @keyframes note-in{to{transform:none; opacity:1}}
    .overlay h2{margin:0; font-size:clamp(22px,7vw,36px); line-height:1.2; font-weight:900}
    .overlay p{margin:.4rem 0 0; color:var(--muted)}
    .overlay .ok{
      margin-top:14px; padding:12px 16px; border-radius:12px; border:1px solid #31405a;
      background:linear-gradient(180deg,#2f7fff,#1f5fe0); color:#fff; font-weight:800; letter-spacing:.3px;
    }

    /* iPhone 12 mini (360√ó780) */
    @media screen and (device-width:360px) and (device-height:780px) and (orientation:portrait){
      :root{--safe-size:324px}
      .panel{width:336px}
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Secure Drop</h1>
      <p class="subtitle">Inserisci la password per aprire la cassaforte</p>
    </header>

    <main class="stage" aria-live="polite">
      <div class="safe" id="safe">
        <div class="box"></div>
        <div class="door" id="door">
          <div class="bezel"></div>
          <div class="bolts"></div>
          <div class="handle"><span class="spoke"></span><span class="knob-center"></span></div>
          <div class="dial"></div>
        </div>
      </div>
    </main>

    <form class="panel" id="panel" onsubmit="return false">
      <input id="pw" class="pw" type="text" placeholder="PASSWORD" inputmode="text"
             autocapitalize="characters" spellcheck="false" maxlength="12" autocomplete="off">
      <button class="btn" id="go" type="button">UNLOCK</button>
    </form>

  </div>

  <!-- Overlay di sovraimpressione -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="note">
      <h2>ora guarda il tuo zito</h2>
      <p>üéÅ sorpresa sbloccata</p>
      <button class="ok" id="okBtn" type="button">OK</button>
    </div>
  </div>

  <script>
    (function(){
      const CORRECT = "PATA21";
      const safe = document.getElementById('safe');
      const input = document.getElementById('pw');
      const btn = document.getElementById('go');
      const panel = document.getElementById('panel');
      const overlay = document.getElementById('overlay');
      const okBtn = document.getElementById('okBtn');

      function openSafe(){
        safe.classList.add('open');
        panel.classList.add('hide');
        // mostra l'overlay in sovraimpressione leggermente dopo l'animazione della porta
        setTimeout(()=> overlay.classList.add('show'), 900);
      }

      function tryUnlock(){
        const value = (input.value || "").replace(/\s+/g,'').toUpperCase();
        if(value === CORRECT){
          openSafe();
        } else {
          input.classList.remove('error'); void input.offsetWidth; input.classList.add('error');
        }
      }

      btn.addEventListener('click', tryUnlock);
      input.addEventListener('keydown', e => { if(e.key === 'Enter') tryUnlock(); });

      okBtn.addEventListener('click', ()=> overlay.classList.remove('show'));
      overlay.addEventListener('click', e => { if(e.target === overlay) overlay.classList.remove('show'); });

      setTimeout(()=>{ input.focus({preventScroll:true}); }, 300);
    })();
  </script>
</body>
</html>
